version: '3'
services:
  inspect-pure-idea-project:
    build: ../../main/docker
    image: intellij-inspect:latest
    volumes:
      - ./pure-idea-project:/idea-project
  inspect-simple-maven-project:
    build: ../../main/docker
    image: intellij-inspect:latest
    volumes:
      - ./simple-maven-project:/idea-project
      - ~/.m2/repository:/root/.m2/repository #re-use artifacts already downloaded on docker host
    command: --rootfile /idea-project/pom.xml --profile /idea-project/idea_inspection_profile.xml
  inspect-external-annotations-enabled-maven-project:
    build: ../../main/docker
    image: intellij-inspect:latest
    volumes:
      - ./external-annotations-enabled-maven-project:/idea-project
      - ~/.m2/repository:/root/.m2/repository #re-use artifacts already downloaded on docker host
      - ./intellij-external-annotations:/idea-jdk-external-annotations:ro
      - ./intellij-external-annotations:/intellij-external-annotations:ro #name also specified in external-annotations-enabled-maven-project.iml
    command: --rootfile /idea-project/pom.xml --profile CLI_inspection_profile.xml
